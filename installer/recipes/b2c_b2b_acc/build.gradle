def config = {
	localProperties {
		property 'googleApiKey', ''
		property 'website.electronics.http', 'http://electronics.local:9001/yacceleratorstorefront'
		property 'website.electronics.https', 'https://electronics.local:9002/yacceleratorstorefront'
		property 'website.apparel-de.http', 'http://apparel-de.local:9001/yacceleratorstorefront'
		property 'website.apparel-de.https', 'https://apparel-de.local:9002/yacceleratorstorefront'
		property 'website.apparel-uk.http', 'http://apparel-uk.local:9001/yacceleratorstorefront'
		property 'website.apparel-uk.https', 'https://apparel-uk.local:9002/yacceleratorstorefront'
		property 'website.powertools.http', 'http://powertools.local:9001/yb2bacceleratorstorefront'
		property 'website.powertools.https', 'https://powertools.local:9002/yb2bacceleratorstorefront'
	}

		extensions {
				extName 'mcc'
				extName 'backoffice'
				extName 'commercesearchbackoffice'
				extName 'b2bcommercebackoffice'
				extName 'commerceservicesbackoffice'
				extName 'solrfacetsearchbackoffice'
				extName 'b2badmincockpit'

				extName 'yacceleratorcockpits'
				extName 'yacceleratorinitialdata'
				extName 'yacceleratorfulfilmentprocess'
				extName 'yacceleratorstorefront'
				extName 'yaddon'
				extName 'ycommercewebservices'
		
				extName 'apparelstore'
				extName 'electronicsstore'
				extName 'powertoolsstore'
				extName 'solrserver'

				extName 'acceleratorwebservicesaddon'
				extName 'b2bacceleratoraddon'
				extName 'commerceorgaddon'
				
				extName 'assistedservicestorefront'
				extName 'customerticketingaddon'
				extName 'customersupportbackoffice'

				extName 'rulebuilderbackoffice'
				extName 'promotionenginebackoffice'
				extName 'droolsruleengineservices'
				extName 'promotionenginesamplesaddon'

		}
}

task setup << {
		apply plugin: 'installer-platform-plugin'
		apply plugin: 'installer-addon-plugin'
		def pl = platform(config)
		pl.setup()
		
		pl.executeAntTarget 'extgen -Dinput.template=yacceleratorstorefront -Dinput.name=yb2bacceleratorstorefront -Dinput.package=de.hybris.platform.yb2bacceleratorstorefront'
		
		pl.extensions {
			extName 'yb2bacceleratorstorefront'
		}
		pl.setup()
		
		pl.project.addons {
				names "b2bacceleratoraddon,commerceorgaddon,assistedservicestorefront,customerticketingaddon,promotionenginesamplesaddon"
				template "yacceleratorstorefront"
				storeFronts "yb2bacceleratorstorefront"
				platform pl
		}
		
		pl.project.addons {
				names "assistedservicestorefront,customerticketingaddon,promotionenginesamplesaddon"
				template "yacceleratorstorefront"
				storeFronts "yacceleratorstorefront"
				platform pl
		}

		pl.project.addons {
				names "acceleratorwebservicesaddon"
				template "ycommercewebservices"
				storeFronts "ycommercewebservices"
				platform pl
		}
}

task initialize << {
		apply plugin: 'installer-platform-plugin'
		def pl = platform(config)
		pl.build()
		pl.initialize()
}

task start << {
		apply plugin: 'installer-platform-plugin'
		def pl = platform(config)
		pl.start()
}
